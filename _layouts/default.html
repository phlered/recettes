---
# Ce layout surcharge minima pour permettre le mode sombre, un header personnalis√© et un fond visuel.
layout: null
---

<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }}</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçΩÔ∏è</text></svg>">
    <link rel="stylesheet" href="{{ '/assets/main.css' | relative_url }}">
  </head>
  <body>
    <header class="site-header">
      <div class="header-content">
        <a href="{{ '/' | relative_url }}" class="logo-btn">
          üçΩÔ∏è Mes Recettes
        </a>
        <div class="search-bar">
          <input type="text" id="headerSearchInput" placeholder="Rechercher une recette..." />
          <button type="button">üîç</button>
          <ul id="headerSearchResults" class="header-search-results"></ul>
        </div>
      </div>
    </header>
    <main class="site-main recette-main">
      {{ content }}
    </main>
    
    <script>
    (function() {
      const searchInput = document.getElementById("headerSearchInput");
      const searchResults = document.getElementById("headerSearchResults");
      
      let recettes = [
      {% for recette in site.recettes %}
        {
          "title": {{ recette.title | jsonify }},
          "url": "{{ recette.url | relative_url }}",
          "content": {{ recette.content | strip_html | jsonify }},
          "tags": {{ recette.tags | jsonify }}
        }{% unless forloop.last %},{% endunless %}
      {% endfor %}
      ];
      
      function debounce(fn, delay) {
        let timer = null;
        return (...args) => {
          clearTimeout(timer);
          timer = setTimeout(() => fn(...args), delay);
        };
      }
      
      function highlight(text, query) {
        if (!query) return text;
        const regex = new RegExp(`(${query})`, "gi");
        return text.replace(regex, "<mark>$1</mark>");
      }
      
      function updateSearch() {
        const q = searchInput.value.toLowerCase().trim();
        searchResults.innerHTML = "";
        
        if (q === "") {
          searchResults.style.display = "none";
          return;
        }
        
        const filtered = recettes.filter(r =>
          r.title.toLowerCase().includes(q) ||
          r.content.toLowerCase().includes(q) ||
          (r.tags && r.tags.some(t => t.toLowerCase().includes(q)))
        );
        
        if (filtered.length === 0) {
          searchResults.innerHTML = "<li class='no-results'>Aucune recette trouv√©e</li>";
          searchResults.style.display = "block";
          return;
        }
        
        filtered.slice(0, 8).forEach(r => {
          const li = document.createElement("li");
          li.innerHTML = `
            <a href="${r.url}">
              <strong>${highlight(r.title, q)}</strong>
              ${r.tags ? '<br><small>' + highlight(r.tags.join(", "), q) + '</small>' : ''}
            </a>
          `;
          searchResults.appendChild(li);
        });
        
        searchResults.style.display = "block";
      }
      
      searchInput.addEventListener("input", debounce(updateSearch, 200));
      
      // Fermer les r√©sultats quand on clique ailleurs
      document.addEventListener("click", function(e) {
        if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
          searchResults.style.display = "none";
        }
      });
      
      // Rouvrir les r√©sultats si on focus l'input et qu'il y a du contenu
      searchInput.addEventListener("focus", function() {
        if (searchInput.value.trim() !== "") {
          updateSearch();
        }
      });
    })();
    </script>
    {% include footer.html %}
  </body>
</html>
